<link rel="import" href="bower_components/polymer/polymer.html">

<polymer-element name="auction-saa-table" attributes="items final">
  <template>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" />
    <style>
      .panel {
          margin: auto;
          width: 400px;
      }
    </style>

    <div class="panel panel-default">
      <!-- <div class="panel-heading">SAA</div> -->
        <table class="table table-hover">
          <thead>
            <th>Item</th>
            <th>Price</th> 

            <template if="{{ final }}">
              <th>Owner</th> 
            </template>

            <template if="{{ ! final }}">
              <th>Your Price</th>
            </template>           
          </thead>

          <!-- items here -->
          <tbody id="tbody">
            <template repeat="{{ item in items }}">     
              <tr>
                <td>{{ item._name }}</td>
                <td>{{ item._price }}</td> 
        
                <template if="{{ final }}">
                  <td>{{ item._owner }}</td> 
                </template>

                <template if="{{ ! final }}">
                  <td><input id="yprice{{item._id}}" type="text" class="form-control" placeholder=""></td>
                </template>
              </tr>
            </template>
          </tbody>
        </table>
      <!-- </div> -->
    </div>

  </template>

  <script>
    Polymer('auction-saa-table', {
      items: [],

      ko: function() {
        var x = this.$.tbody;
        var y = x.querySelector("#yprice0");
        console.log("xxyx", x, y);
      },

      getItems: function() {
        //validate

        var item = [];
        for ( i=0; i < this.items.length; i++ ) {
          var bid = {};
          bid._id = this.items[i]._id;
          bid._name = this.items[i]._name;
          bid._price = this.$.tbody.querySelector("#yprice" + bid._id).value;
          bid._owner = "";

          item[i] = bid;
        }

        return item;
      }

    });
  </script>
</polymer-element>

<!--
{
   "bid": {
      "item_list": {
         "item": [
            {
               "_id": "0",
               "_name": "dogfood",
               "_price": "120",
               "_owner": ""
            },
            {
               "_id": "1",
               "_name": "kennel",
               "_price": "290",
               "_owner": ""
            },
            {
               "_id": "2",
               "_name": "dota",
               "_price": "0",
               "_owner": ""
            }
         ]
      }
   }
}
  -->