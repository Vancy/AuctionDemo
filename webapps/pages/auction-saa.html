<link rel="import" href="bower_components/polymer/polymer.html">
<link rel="import" href="bower_components/core-ajax/core-ajax.html">
<link rel="import" href="auction-saa-table.html">
<link rel="import" href="utils.html">
<link rel="import" href="native-post.html">


<polymer-element name="auction-saa">
  <template>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" />
    <link rel="stylesheet" href="./auction-saa.css" type="text/css" />

    <div id="auction-saa">
      <p>Round {{ round }}</p>
      <p id="time"></p>
      <auction-saa-table id="table" items="{{ items }}" final="{{ isFinal }}"></auction-saa-table>
      <div class="btn-group">
        <button id="bid" on-click="{{submit}}" type="button" class="btn btn-default">Bid</button>
      </div>
    </div>

    <!-- The ajax that submits a bid. -->
    <native-post
      id="submit"
      url="/WEB-INF/bid.xml"
      params="{{ data }}"
      success="{{ success }}"      
      fail="{{ fail }}"
    ></native-post>

    <!-- <core-ajax
      id="submit"
      url="/WEB-INF/bid.xml"
      params="{{ data }}"
      method="POST"
      on-core-response="{{ success }}"
      on-core-rror="{{ fail }}"
    ></core-ajax>  -->

    <!-- The ajax TIMER that asks for newer inforamtion. -->
    <core-ajax
      id="period"
      url="{{ updateUrl }}"
      handleAs="xml"
      on-core-response="{{ update }}"
    ></core-ajax>    

    <!-- <native-timer id="timer"></native-timer> @possible to imporve by using this components-->
  </template>
  <script src="./auction-saa.js"></script>
</polymer-element>